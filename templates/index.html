{% include "header.html" %}
    <vs-dialog v-model="isLogin">
        <template #header>
            <h4 class="not-margin">
                Добро пожаловать
            </h4>
        </template>
        <form action="/login" method="post">
            <div class="con-form">
                <vs-input v-model="email" placeholder="Email" name="email">
                    <template #icon>
                        @
                    </template>
                </vs-input>
                <vs-input icon="add" type="password" v-model="password" placeholder="пароль" name="password">
                    <template #icon>
                        <img src="/static/vpn_key-24px.svg" alt="p">
                    </template>
                </vs-input>
                <vs-button relief dark type="submit">
                    Войти
                </vs-button>
                <div class="flex">
                    <a href="#">Забыли пароль?</a>
                </div>

            </div>

            <template #footer>
                <div class="footer-dialog">
                    <div class="new">
                        New Here? <a href="#">Create New Account</a>
                    </div>
                </div>
            </template>
        </form>
    </vs-dialog>
    <vs-dialog v-model="isRegister">
        <template #header>
            <h4 class="not-margin">
                Добро пожаловать
            </h4>
        </template>
        <form action="/signup" method="post">
            <div class="con-form">
                <vs-input v-model="email" placeholder="Email" name="email">
                    <template #icon>
                        @
                    </template>
                </vs-input>
                <vs-input icon="add" type="password" v-model="password" placeholder="пароль" name="password">
                    <template #icon>
                        <img src="/static/vpn_key-24px.svg" alt="p">
                    </template>
                </vs-input>
                <vs-input icon="add" type="password" v-model="passwordRepeat" placeholder="повторите пароль" name="passwordRepeat">
                    <template #icon>
                        <img src="/static/vpn_key-24px.svg" alt="p">
                    </template>
                </vs-input>
                <vs-button relief dark type="submit">
                    Зарегистрироваться
                </vs-button>

            </div>

            <template #footer>
                <div class="footer-dialog">
                    <div class="new">
                        New Here? <a href="#">Create New Account</a>
                    </div>
                </div>
            </template>
        </form>
    </vs-dialog>
    <!-- ГОСТЬ (РАСКОММЕНТЬ)
    <section class="head-section">
        <div class="head-elements-wrapper">
            <h1>Узнаем всё про всех.</h1>
            <button class="create-poll">
                <a class="create-poll-label" href="/createsurvey">Создать опрос</a>
            </button>
        </div>
    </section>
    --> 
    
    <!-- НАЧАЛО ЗАРЕГАНЫЙ ЮЗЕР -->
    <section>
        <section class="user-polls">
            <ul class="basic-categories-list">
                <li class="popular-item selected">Мои опросы</li>
            </ul>
        </section>
        <section class="index-polls">
            {% for survey in surveys %}
            <div class="poll-card">
                <a href="/runpoll/{{ survey.id }}">
                    <div class="poll-picture"></div>
                    <p class="poll-label">{{ survey.name }}</p>
                </a>
            </div>
            {% endfor %}
        </section>
    </section>
    <!-- КОНЕЦ ЗАРЕГАНЫЙ ЮЗЕР -->

    <section class="main-section">
        <section class="basic-categories">
            <ul class="basic-categories-list">
                <li class="popular-item selected">Популярное</li>
                <li class="new-item">Новое</li>
                <li class="all-item">Категории</li>
                <li class="categories-item">Поиск</li>
            </ul>
        </section>
        <section class="index-polls">
            {% for survey in surveys %}
            <div class="poll-card">
                <a href="/runpoll/{{ survey.id }}">
                    <div class="poll-picture"></div>
                    <p class="poll-label">{{ survey.name }}</p>
                </a>
            </div>
            {% endfor %}
        </section>
        <section class="search-polls">
            <div class="search-wrapper">
                <img src="/static/search-icon.svg" alt="search icon">
                <p class="search-label">поиск по опросам</p>
            </div>
        </section>
    </section>

</main>
{% include "footer.html" %}
{%  raw %}
<script type="text/lua">
local js = require "js"
local window = js.global

package.loadlib("https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js", "*")
package.loadlib("https://unpkg.com/vuesax@4.0.1-alpha.16/dist/vuesax.min.js","*")

local Object = dofile("https://gist.githubusercontent.com/daurnimator/5a7fa933e96e14333962093322e0ff95/raw/8c6968be0111c7becc485a692162ad100e87d9c7/Object.lua").Object

window.app = js.new(js.global.Vue, Object{
	el = "#mainApp";
	methods = Object{
        login= function ()
            window.app.isLogin = true
        end;
        register =  function ()
            window.app.isRegister = true
        end;
        closeForm=  function ()
            window.app.isLogin = false
            window.app.isRegister = false
        end;
    };
	data = Object{
        isLogin = false;
        isRegister = false;
        passwordRepeat='';
        password='';
        email='';
	}
})

</script>
{%  endraw %}
</html>